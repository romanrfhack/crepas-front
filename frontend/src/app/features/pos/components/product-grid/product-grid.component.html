<section class="product-grid" aria-label="Productos disponibles">
  <div class="grid-header">
    <h2>Productos</h2>
    @if (products().length > 0) {
      <span class="product-count">{{ products().length }} art√≠culos</span>
    }
  </div>

  @if (products().length === 0) {
    <div class="empty-products">
      <span>üîç</span>
      <p>No se encontraron productos</p>
      <p>Intenta con otra categor√≠a o b√∫squeda</p>
    </div>
  } @else {
    <div class="grid-container">
      @for (product of products(); track product.id) {
        <button
          type="button"
          class="product-card"
          (click)="onProductClick(product)"
          [attr.aria-label]="'Agregar ' + product.name + ' al carrito'"
          [disabled]="!product.isAvailable"
          [attr.data-testid]="'product-' + product.id"
        >
          <div class="product-info">
            <span class="product-name">{{ product.name }}</span>
            <div class="product-price-row">
              <span class="product-price">${{ product.basePrice.toFixed(2) }}</span>
              @if (product.isAvailable) {
                <span class="add-icon" aria-hidden="true">+</span>
              } @else {
                <span
                  class="add-icon"
                  aria-hidden="true"
                  [attr.data-testid]="'product-unavailable-' + product.id"
                >
                  Agotado
                </span>
                <span [attr.data-testid]="'availability-badge-Product-' + product.id">
                  {{ product.availabilityReason ?? 'Unavailable' }}
                </span>
              }
            </div>
          </div>
        </button>
      }
    </div>
  }
</section>
